webpackJsonp([3],{"2buM":function(e,t){},"5gjW":function(e,t,a){var l={"./Financemain.vue":"Ovix","./Fininpatient.vue":"eY1r","./Finstatistics.vue":"ISf/"};function r(e){return a(i(e))}function i(e){var t=l[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}r.keys=function(){return Object.keys(l)},r.resolve=i,e.exports=r,r.id="5gjW"},"ISf/":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l={data:function(){return{salaryList:[],mergeArr:[],pos:0,date:"",headerTitle:"广州安裕物业管理有限公司驻   "+this.$store.state.user.projectName+"   员工考勤统计表",tableLoading:!1}},methods:{cellMerge:function(e){e.row,e.column;var t=e.rowIndex;if(1===e.columnIndex){var a=this.mergeArr[t];return{rowspan:a,colspan:a>0?1:0}}},generalSalaryReport:function(){var e=this,t=this.$loading({lock:!0,text:"数据加载中，请等待...",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});this.tableLoading=!0,this.postRequestJson("/report/salary",{projectId:2,date:this.date}).then(function(a){if(console.log(a),t.close(),e.salaryList=[],a&&"200"===a.data.code){var l=a.data.msg;if(0!==l.length){for(var r=0;r<l.length;r++){var i=l[r].careworkers;e.mergeArr.push(i.length);for(var o=0;o<i.length;o++)e.mergeArr.push(0),e.salaryList.push({org:l[r].orgName,name:i[o].name,job:i[o].jobName,daycount:i[o].countDay,salary:i[o].salary,reward:i[o].reward,total:i[o].reward+i[o].salary});e.mergeArr.pop()}e.tableLoading=!1}else e.$message({type:"fail",message:"该月份没有数据"})}else e.$message({type:"fail",message:a.data.msg})})},changeTitle:function(){this.headerTitle="广州安裕物业管理有限公司驻   "+this.$store.state.user.projectName+"   员工"+this.date+"考勤统计表"},exportExcelFile:function(){var e=this,t=this.$loading({lock:!0,text:"数据加载中，请等待...",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});this.postRequestFile("/report/salary/file",{projectId:2,date:this.date}).then(function(a){if(console.log(a),t.close(),a&&200==a.status&&null==a.data.code){var l=new Blob([a.data],{type:"application/vnd.ms-excel"}),r=document.createElement("a");r.href=window.URL.createObjectURL(l),r.download="陪护人员工资统计_"+e.date+".xlsx",r.click()}else if(null!=a.data.code)return void e.$message({type:"fail",message:a.data.msg})})}}},r={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{staticClass:"demo-form-inline",staticStyle:{"margin-top":"10px"},attrs:{inline:!0}},[a("el-row",[a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:"月份:",prop:"username"}},[a("div",{staticClass:"block"},[a("el-date-picker",{staticStyle:{width:"150px"},attrs:{type:"month",size:"mini","value-format":"yyyy-MM",format:"yyyy年MM月",placeholder:"选择月"},on:{change:e.changeTitle},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}})],1)])],1),e._v(" "),a("el-col",{attrs:{span:5}},[a("el-form-item",[a("el-button",{attrs:{size:"mini",icon:"el-icon-search",type:"primary"},on:{click:e.generalSalaryReport}},[e._v("查询")]),e._v(" "),a("el-button",{attrs:{size:"mini",icon:"el-icon-upload2",type:"primary"},on:{click:e.exportExcelFile}},[e._v("导出Excel")])],1)],1)],1),e._v(" "),a("el-row",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.salaryList,"v-loading":e.tableLoading,border:"","span-method":e.cellMerge,height:"650"}},[a("el-table-column",{attrs:{label:e.headerTitle,width:"100%",align:"center"}},[a("el-table-column",{attrs:{type:"index",prop:"index",align:"center",fixed:"",label:"序号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"org",align:"center",fixed:"",label:"科室"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",align:"center",fixed:"",label:"姓名"}}),e._v(" "),a("el-table-column",{attrs:{prop:"job",align:"center",label:"职务",fixed:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"daycount",fixed:"",align:"center",label:"计发天数"}}),e._v(" "),a("el-table-column",{attrs:{prop:"salary",label:"应发工资",fixed:"",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"reward",align:"center",fixed:"",label:"奖励"}}),e._v(" "),a("el-table-column",{attrs:{prop:"total",align:"center",fixed:"",label:"工资合计"}})],1)],1)],1)],1)],1)},staticRenderFns:[]};var i=a("VU/8")(l,r,!1,function(e){a("z0eb")},"data-v-85947b70",null);t.default=i.exports},Ovix:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l={data:function(){return{orgReportData:[],orgId:"",EdialogVisible:!1,treeData:{children:"children",label:"label",id:"id",isLeaf:"isLeaf",disabled:"disabled"},dialogTitle:"",date:"",curOrgName:""}},methods:{cancelEidt:function(){this.EdialogVisible=!1},showOrgTable:function(){this.dialogTitle="科室参照",this.EdialogVisible=!0},loadChild:function(e,t){var a=this,l=null==e.parent?null:e.data.id,r=t;this.tableLoading=!0,this.postRequestJson("/busi/baseinfo/organization/list",{orgId:l,projectId:this.$store.state.user.projectId}).then(function(e){if(a.tableLoading=!1,e&&200===e.status){for(var t=[],l=e.data.msg.result,i=0;i<l.length;i++)t.push({id:e.data.msg.result[i].id,label:e.data.msg.result[i].name,children:[],isLeaf:e.data.msg.result[i].isLeaf,disabled:!e.data.msg.result[i].isLeaf});r(t)}})},orgClick:function(){var e=this.$refs.tree.getCheckedNodes();this.curOrgName=e[0].label,this.orgId=e[0].id,this.EdialogVisible=!1},orgNodeClick:function(e,t){console.log(e),console.log(t);var a=[];a.push(e),console.log(this),this.$refs.tree.setCheckedNodes(a,!0)},clearOrgInput:function(){this.curOrgName="",this.orgId=""},searchReport:function(){var e=this,t=this.$loading({lock:!0,text:"数据加载中，请等待...",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});this.orgReportData=[],this.postRequestJson("/report/org",{orgId:this.orgId,date:this.date}).then(function(a){if(t.close(),a&&"200"===a.data.code){var l=a.data.msg;if(0!==l.length)for(var r=0;r<l.length;r++)e.orgReportData.push({date:l[r].date,income:l[r].income,expend:l[r].expend});else e.$message({type:"fail",message:"该月份没有数据"})}else e.$message({type:"fail",message:a.data.msg})})}}},r={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{staticClass:"demo-form-inline",staticStyle:{"margin-top":"10px"},attrs:{inline:!0}},[a("el-row",[a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:"月份:",prop:"username"}},[a("div",{staticClass:"block"},[a("el-date-picker",{staticStyle:{width:"150px"},attrs:{type:"month",size:"mini","value-format":"yyyy-MM",format:"yyyy年MM月",placeholder:"选择月"},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}})],1)])],1),e._v(" "),a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:"科室:",prop:"orgId"}},[a("el-input",{staticStyle:{width:"150px"},attrs:{"prefix-icon":"el-icon-edit",value:e.curOrgName,size:"mini",placeholder:"选择科室"},on:{focus:e.showOrgTable}},[a("i",{staticClass:"el-input__icon el-icon-circle-close",attrs:{slot:"suffix"},on:{click:e.clearOrgInput},slot:"suffix"})])],1)],1),e._v(" "),a("el-col",{attrs:{span:5}},[a("el-form-item",[a("el-button",{attrs:{size:"mini",icon:"el-icon-search",type:"primary"},on:{click:e.searchReport}},[e._v("查询")])],1)],1)],1),e._v(" "),a("el-row",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.orgReportData,border:"","show-summary":!0,size:"mini"}},[a("el-table-column",{attrs:{type:"index",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"date",align:"center",label:"日期",width:"120px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"income",align:"center",label:"总收入(天/元)"}}),e._v(" "),a("el-table-column",{attrs:{prop:"expend",align:"center",label:"总支出(天/元)"}})],1)],1)],1),e._v(" "),a("el-form",{ref:"OrgForm",staticStyle:{margin:"0px",padding:"0px"}},[a("div",{staticStyle:{"text-align":"left"}},[a("el-dialog",{staticStyle:{padding:"0px"},attrs:{title:e.dialogTitle,"close-on-click-modal":!1,visible:e.EdialogVisible,width:"30%"},on:{"update:visible":function(t){e.EdialogVisible=t}}},[a("el-row",[a("el-tree",{ref:"tree",attrs:{props:e.treeData,load:e.loadChild,"node-key":"id",lazy:"","show-checkbox":""},on:{check:e.orgNodeClick}})],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"mini"},on:{click:e.cancelEidt}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.orgClick}},[e._v("确 定")])],1)],1)],1)])],1)},staticRenderFns:[]};var i=a("VU/8")(l,r,!1,function(e){a("2buM")},"data-v-8a2af43c",null);t.default=i.exports},QeZx:function(e,t){},eY1r:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l={data:function(){return{salaryList:[],mergeArr:[],pos:0,date:""}},methods:{generalSalaryReport:function(){var e=this,t=this.$loading({lock:!0,text:"数据加载中，请等待...",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});this.postRequestJson("/report/patient",{projectId:2,date:this.date}).then(function(a){if(console.log(a),t.close(),e.salaryList=[],a&&"200"===a.data.code){var l=a.data.msg;if(0!==l.length)for(var r=0;r<l.length;r++)e.salaryList.push({patientCode:l[r].patientCode,hospitailDate:l[r].hospitalDate,name:l[r].patientName,org:l[r].orgName,bedNum:l[r].bedNum,pay:l[r].pay,careType:l[r].careTypeName,price:l[r].price,status:l[r].status,leaveDate:l[r].leaveDate,day:l[r].days,amount:l[r].amount});else e.$message({type:"fail",message:"该月份没有数据"})}else e.$message({type:"fail",message:a.data.msg})})},exportExcelFile:function(){var e=this,t=this.$loading({lock:!0,text:"数据加载中，请等待...",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});this.postRequestFile("/report/patient/file",{projectId:2,date:this.date}).then(function(a){if(console.log(a),t.close(),a&&200==a.status&&null==a.data.code){var l=new Blob([a.data],{type:"application/vnd.ms-excel"}),r=document.createElement("a");r.href=window.URL.createObjectURL(l),r.download="住院报表_"+e.date+".xlsx",r.click()}else if(null!=a.data.code)return void e.$message({type:"fail",message:a.data.msg})})}}},r={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-form",{staticClass:"demo-form-inline",staticStyle:{"margin-top":"10px"},attrs:{inline:!0}},[a("el-row",[a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:"月份:",prop:"username"}},[a("div",{staticClass:"block"},[a("el-date-picker",{staticStyle:{width:"150px"},attrs:{type:"month",size:"mini","value-format":"yyyy-MM",format:"yyyy年MM月",placeholder:"选择月"},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}})],1)])],1),e._v(" "),a("el-col",{attrs:{span:5}},[a("el-form-item",[a("el-button",{attrs:{size:"mini",icon:"el-icon-search",type:"primary"},on:{click:e.generalSalaryReport}},[e._v("查询")]),e._v(" "),a("el-button",{attrs:{size:"mini",icon:"el-icon-upload2",type:"primary"},on:{click:e.exportExcelFile}},[e._v("导出Excel")])],1)],1)],1),e._v(" "),a("el-row",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.salaryList,border:"",height:"650"}},[a("el-table-column",{attrs:{align:"center",type:"index",fixed:"left",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"patientCode",align:"center",fixed:"",label:"病人编号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",align:"center",fixed:"",label:"姓名"}}),e._v(" "),a("el-table-column",{attrs:{prop:"hospitailDate",align:"center",label:"入院时间"}}),e._v(" "),a("el-table-column",{attrs:{prop:"org",align:"center",label:"科室"}}),e._v(" "),a("el-table-column",{attrs:{prop:"bedNum",align:"center",label:"床号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"pay",label:"预收款",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"careType",align:"center",label:"陪护类型"}}),e._v(" "),a("el-table-column",{attrs:{prop:"price",align:"center",label:"单价"}}),e._v(" "),a("el-table-column",{attrs:{prop:"status",align:"center",label:"服务状态"}}),e._v(" "),a("el-table-column",{attrs:{prop:"leaveDate",align:"center",label:"出院日期"}}),e._v(" "),a("el-table-column",{attrs:{prop:"day",align:"center",label:"天数"}}),e._v(" "),a("el-table-column",{attrs:{prop:"amount",align:"center",label:"服务金额"}})],1)],1)],1)},staticRenderFns:[]};var i=a("VU/8")(l,r,!1,function(e){a("QeZx")},"data-v-36172ad3",null);t.default=i.exports},z0eb:function(e,t){}});
//# sourceMappingURL=3.00b448eac80743da32b9.js.map